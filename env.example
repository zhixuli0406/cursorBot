# ========================================
# CursorBot Environment Configuration
# ========================================

# Telegram Bot Settings (required)
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_ALLOWED_USERS=123456789,987654321

# ========================================
# Workspace Settings
# ========================================

# Local workspace path for file operations
# This path will be mounted to /workspace in Docker container
# Windows example: C:/Users/YourName/Projects
# macOS example: /Users/yourname/projects
# Linux example: /home/yourname/projects
CURSOR_WORKSPACE_PATH=/path/to/your/projects

# ========================================
# Server Settings
# ========================================

SERVER_HOST=0.0.0.0
SERVER_PORT=8000
DEBUG=false

# ========================================
# Gateway 設定（原生應用連線）
# ========================================
# 原生應用（macOS/iOS/Android）的 WebSocket 連線端點
# 端點位址: ws://{SERVER_HOST}:{SERVER_PORT}/ws/node
# 
# Gateway Token: 原生應用的認證 Token（可選）
# 留空則允許所有連線（開發模式）
# 正式環境建議設定安全的 Token
GATEWAY_TOKEN=

# Gateway 功能開關
GATEWAY_CHAT_ENABLED=true          # 啟用聊天功能
GATEWAY_CANVAS_ENABLED=true        # 啟用 Live Canvas 功能
GATEWAY_PAIRING_ENABLED=true       # 啟用裝置配對功能
GATEWAY_IMAGE_ANALYSIS_ENABLED=true # 啟用圖像分析功能

# ========================================
# v1.1 語音助手設定 (Voice Assistant)
# ========================================
# CursorBot 語音助手，支援類似 Siri 的語音互動功能

# --- 喚醒詞設定 ---
# 啟用語音喚醒功能
VOICE_WAKE_ENABLED=true
# 喚醒詞引擎: vosk (免費離線), porcupine (高精度，需 API Key)
VOICE_WAKE_ENGINE=vosk
# 自訂喚醒詞 (逗號分隔)
VOICE_WAKE_WORDS=hey cursor,ok cursor,嘿 cursor,小助手
# 喚醒靈敏度 (0.0-1.0)
VOICE_WAKE_SENSITIVITY=0.5
# 喚醒後的聆聽逾時秒數
VOICE_WAKE_TIMEOUT=10

# --- 語音辨識 (STT) 設定 ---
# STT 引擎: whisper_local (本地), whisper_api (OpenAI API), vosk (離線)
VOICE_STT_ENGINE=whisper_local
# Whisper 模型大小: tiny, base, small, medium, large
VOICE_WHISPER_MODEL=base
# 主要語言 (zh, en, ja, etc.)
VOICE_STT_LANGUAGE=zh
# Vosk 模型路徑 (離線模式)
VOICE_VOSK_MODEL_PATH=models/vosk-model-small-cn

# --- 語音合成 (TTS) 設定 ---
# 啟用語音回應
VOICE_TTS_ENABLED=true
# TTS 引擎: edge (免費), elevenlabs (高品質), openai
VOICE_TTS_ENGINE=edge
# TTS 語音 (Edge TTS 範例)
#   中文: zh-TW-HsiaoChenNeural, zh-TW-YunJheNeural, zh-CN-XiaoxiaoNeural
#   英文: en-US-AriaNeural, en-US-GuyNeural
VOICE_TTS_VOICE=zh-TW-HsiaoChenNeural
# TTS 速度 (0.5-2.0)
VOICE_TTS_SPEED=1.0

# --- 語音處理設定 ---
# 啟用語音活動偵測 (VAD)
VOICE_VAD_ENABLED=true
# VAD 能量閾值 (0.0-1.0)
VOICE_VAD_THRESHOLD=0.02
# 靜音時長閾值 (秒，用於判斷語句結束)
VOICE_VAD_SILENCE_DURATION=1.5
# 啟用噪音消除
VOICE_NOISE_REDUCTION=true

# --- 回饋音效設定 ---
# 啟用提示音
VOICE_SOUND_ENABLED=true
# 自訂音效路徑 (留空使用預設)
VOICE_SOUND_WAKE=
VOICE_SOUND_START=
VOICE_SOUND_END=
VOICE_SOUND_ERROR=

# --- 對話設定 ---
# 助手名稱
VOICE_ASSISTANT_NAME=小助手
# 回應風格: friendly (友善), professional (專業), casual (輕鬆)
VOICE_RESPONSE_STYLE=friendly
# 最大回應長度 (字元，適合語音朗讀)
VOICE_MAX_RESPONSE_LENGTH=200
# 對話記憶逾時 (秒)
VOICE_CONVERSATION_TIMEOUT=300
# 最大對話回合數
VOICE_MAX_HISTORY_TURNS=10

# --- 進階設定 ---
# Porcupine API Key (如使用 porcupine 引擎)
# 取得: https://console.picovoice.ai/
PORCUPINE_ACCESS_KEY=

# ElevenLabs API Key (如使用 elevenlabs TTS)
# 取得: https://elevenlabs.io/
ELEVENLABS_API_KEY=

# ========================================
# Security Settings
# ========================================

SECRET_KEY=your_secret_key_here
SESSION_TIMEOUT=3600

# ========================================
# Session Management (ClawdBot-style)
# Reference: https://docs.clawd.bot/concepts/session
# ========================================

# DM scope mode: how direct messages are grouped
# main = all DMs share main session (default, best for continuity)
# per-peer = isolate by sender id across channels
# per-channel-peer = isolate by channel + sender (for multi-user inboxes)
SESSION_DM_SCOPE=main

# Session reset mode
# daily = reset at specific hour each day (default)
# idle = reset after idle period
# manual = only reset manually (/new, /reset)
# never = never auto-reset
SESSION_RESET_MODE=daily

# Hour of day for daily reset (0-23, default 4 = 4:00 AM)
SESSION_RESET_HOUR=4

# Minutes of idle before reset (for idle mode, default 120)
SESSION_IDLE_MINUTES=120

# Data directory for session storage
CURSORBOT_DATA_DIR=data

# ========================================
# Web Authentication (Dashboard & WebChat)
# ========================================

# Enable web authentication (recommended for production)
WEB_AUTH_ENABLED=true

# Admin credentials for Dashboard and WebChat
# IMPORTANT: Change these in production!
WEB_ADMIN_USERNAME=admin
WEB_ADMIN_PASSWORD=

# Note: If WEB_ADMIN_PASSWORD is empty, authentication is disabled

# ========================================
# Database & Logging
# ========================================

DATABASE_PATH=./data/cursorbot.db
LOG_LEVEL=INFO
LOG_FILE_PATH=./logs/cursorbot.log

# ========================================
# Cursor CLI Settings (Recommended)
# ========================================

# Install Cursor CLI: curl https://cursor.com/install -fsS | bash

# Cursor CLI working directory (optional)
# If not set, uses CURSOR_WORKSPACE_PATH automatically
# Only set this if you want CLI to use a different directory than workspace
CURSOR_WORKING_DIR=

# Cursor CLI model (optional, uses CLI default)
# Available models (use /climodel list to see all):
# - auto: Auto select (default)
# - gpt-5.2, gpt-5.2-codex: GPT-5.2 series
# - opus-4.5, opus-4.5-thinking: Claude 4.5 Opus
# - sonnet-4.5, sonnet-4.5-thinking: Claude 4.5 Sonnet
# - gemini-3-pro, gemini-3-flash: Gemini 3 series
# - grok: Grok
CURSOR_CLI_MODEL=

# Cursor CLI timeout in seconds
# Set to 0, "none", or leave empty to disable timeout (wait indefinitely)
# CURSOR_CLI_TIMEOUT=300
CURSOR_CLI_TIMEOUT=

# Disable CLI context memory (--resume) if causing issues
# Set to 1, true, or yes to disable
CLI_DISABLE_RESUME=

# ========================================
# LLM Provider Settings
# ========================================
# 
# Support multiple AI providers. Configure the ones you want to use.
# Priority (if DEFAULT_LLM_PROVIDER not set):
#   OpenRouter > Copilot > OpenAI > Anthropic > Google > Ollama > Custom
#

# --- Default Provider ---
# Set to force a specific provider: openai, google, anthropic, openrouter, ollama, custom
DEFAULT_LLM_PROVIDER=
# Optional: Override the default model for the chosen provider
DEFAULT_LLM_MODEL=

# --- OpenAI ---
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=
OPENAI_API_BASE=https://api.openai.com/v1
# Latest Models (2026):
#   GPT-5 Series: gpt-5.2, gpt-5-main, gpt-5-main-mini
#   Thinking Models: gpt-5-thinking, gpt-5-thinking-mini, gpt-5-thinking-nano
#   Legacy: gpt-4o, gpt-4o-mini, gpt-4-turbo, o3, o1-preview, o1-mini
OPENAI_MODEL=gpt-5-main-mini

# --- Google Gemini ---
# Get API key from: https://aistudio.google.com/apikey
GOOGLE_GENERATIVE_AI_API_KEY=
# Latest Models (2026):
#   Gemini 3: gemini-3-pro-preview, gemini-3-flash-preview, gemini-3-pro-image-preview
#   Gemini 2.5: gemini-2.5-pro, gemini-2.5-flash, gemini-2.5-flash-lite
#   Legacy: gemini-2.0-flash, gemini-1.5-pro, gemini-1.5-flash
GOOGLE_MODEL=gemini-3-flash-preview

# --- Anthropic Claude ---
# Get API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=
ANTHROPIC_API_BASE=https://api.anthropic.com/v1
# Latest Models (2026):
#   Claude 4.5: claude-opus-4-5-20251101, claude-sonnet-4-5-20250929
#   Claude 4: claude-sonnet-4-20250514
#   Legacy: claude-3-5-sonnet-20241022, claude-3-5-haiku-20241022, claude-3-opus-20240229
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# --- OpenRouter (Proxy to multiple models) ---
# Get API key from: https://openrouter.ai/keys
# Recommended for access to multiple models with one key
OPENROUTER_API_KEY=
# Free models (2026):
#   - google/gemini-3-flash-preview:free (recommended)
#   - mistral/devstral-2-2512:free (123B coding model)
#   - deepseek/deepseek-r1-0528:free (reasoning)
#   - z-ai/glm-4.5-air:free (lightweight agent)
#   - meta-llama/llama-3.3-70b-instruct:free
# Paid models:
#   - anthropic/claude-sonnet-4.5
#   - openai/gpt-5-main
#   - google/gemini-3-pro-preview
OPENROUTER_MODEL=google/gemini-3-flash-preview:free

# --- Ollama (Local Models) ---
# Install Ollama from: https://ollama.ai/
# Run: ollama pull llama3.3
OLLAMA_ENABLED=false
OLLAMA_API_BASE=http://localhost:11434
# Latest Models (2026):
#   Llama: llama3.3, llama3.2, llama3.1 (8B-405B)
#   Qwen: qwen3, qwen3-coder, qwen3-vl, qwen2.5 (0.5B-235B)
#   DeepSeek: deepseek-r1, deepseek-v3.2 (reasoning)
#   Mistral: mistral-large-3, mistral (MoE models)
#   Others: gemma3, phi-4, glm-4.7-flash
OLLAMA_MODEL=llama3.3

# --- Custom OpenAI-Compatible Endpoint ---
# For self-hosted models or alternative APIs (LM Studio, vLLM, etc.)
CUSTOM_API_KEY=
CUSTOM_API_BASE=
CUSTOM_MODEL=default

# --- GitHub Copilot (Native API) ---
# Use GitHub Copilot subscription for AI chat
# Requires a valid GitHub Copilot subscription (Individual/Business/Enterprise)
#
# Method 1: Direct Copilot Token (Recommended)
# Extract from VS Code:
#   1. Open VS Code Developer Tools (Help > Toggle Developer Tools)
#   2. Run: await require('vscode').authentication.getSession('github', ['copilot'])
#   3. Copy the accessToken
COPILOT_TOKEN=

# Method 2: GitHub Personal Access Token
# Get from: https://github.com/settings/tokens
# Requires permissions: read:user, user:email
GITHUB_TOKEN=

# Enable Copilot provider
COPILOT_ENABLED=false

# Available models via Copilot API:
#   gpt-4o (recommended), gpt-4o-mini, gpt-4-turbo, gpt-4
#   gpt-3.5-turbo, claude-3.5-sonnet, o1-preview, o1-mini
COPILOT_MODEL=gpt-4o

# --- AI General Settings ---
CUSTOM_PROMPT=
AI_MAX_TOKENS=4096
AI_TEMPERATURE=0.7

# ========================================
# TTS (Text-to-Speech) Settings (Optional)
# ========================================

# --- ElevenLabs (High Quality) ---
# Get API key from: https://elevenlabs.io/
ELEVENLABS_API_KEY=

# Default TTS provider: openai, edge, elevenlabs
DEFAULT_TTS_PROVIDER=edge

# Default TTS voice
# OpenAI: alloy, echo, fable, onyx, nova, shimmer
# Edge: zh-TW-HsiaoChenNeural, en-US-JennyNeural, etc.
# ElevenLabs: rachel, domi, bella, antoni, etc.
DEFAULT_TTS_VOICE=

# ========================================
# OAuth Settings (Optional)
# ========================================

# --- GitHub OAuth ---
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_OAUTH_REDIRECT_URI=http://localhost:8000/oauth/github/callback

# --- Google OAuth ---
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:8000/oauth/google/callback

# --- Discord OAuth ---
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_OAUTH_REDIRECT_URI=http://localhost:8000/oauth/discord/callback

# ========================================
# Sandbox Settings (Optional)
# ========================================

# Default sandbox type: subprocess, docker, restricted
DEFAULT_SANDBOX_TYPE=subprocess

# Sandbox execution timeout (seconds)
SANDBOX_TIMEOUT=30

# Docker sandbox settings
SANDBOX_MEMORY_LIMIT=256m
SANDBOX_CPU_LIMIT=1.0
SANDBOX_NETWORK_ENABLED=false

# ========================================
# Queue & Heartbeat Settings (Optional)
# ========================================

# Task queue settings
QUEUE_MAX_CONCURRENT=5
QUEUE_DEFAULT_TIMEOUT=300

# Heartbeat monitoring interval (seconds)
HEARTBEAT_INTERVAL=30

# ========================================
# Discord Bot Settings (Optional)
# ========================================

# Enable Discord bot
DISCORD_ENABLED=false

# Discord bot token
# Get from: https://discord.com/developers/applications
DISCORD_BOT_TOKEN=

# Allowed Discord guild (server) IDs (comma-separated)
DISCORD_ALLOWED_GUILDS=

# Allowed Discord user IDs (comma-separated)
DISCORD_ALLOWED_USERS=

# ========================================
# Discord Voice Settings (Optional)
# ========================================

# Enable Discord voice channel listening
DISCORD_VOICE_ENABLED=false

# Transcription model: whisper, google, openai_api
DISCORD_VOICE_TRANSCRIPTION=whisper

# Whisper model size: tiny, base, small, medium, large
DISCORD_VOICE_WHISPER_MODEL=base

# Silence threshold for VAD (lower = more sensitive)
DISCORD_VOICE_SILENCE_THRESHOLD=500

# Seconds of silence to end utterance
DISCORD_VOICE_SILENCE_DURATION=1.5

# ========================================
# Slack Settings (Optional)
# ========================================

# Enable Slack integration
SLACK_ENABLED=false

# Slack Bot OAuth Token (xoxb-...)
# Get from: https://api.slack.com/apps > OAuth & Permissions
SLACK_BOT_TOKEN=

# Slack Signing Secret
# Get from: https://api.slack.com/apps > Basic Information
SLACK_SIGNING_SECRET=

# Slack App-Level Token for Socket Mode (xapp-...)
# Optional, for real-time events without webhooks
SLACK_APP_TOKEN=

# Allowed Slack user IDs (comma-separated)
# Leave empty to allow all users
SLACK_ALLOWED_USERS=

# ========================================
# WhatsApp Cloud API Settings (Optional)
# ========================================

# Enable WhatsApp integration
WHATSAPP_ENABLED=false

# WhatsApp Cloud API Access Token
# Get from: https://developers.facebook.com/apps > WhatsApp > API Setup
WHATSAPP_ACCESS_TOKEN=

# WhatsApp Webhook Verification Token (you define this)
WHATSAPP_VERIFY_TOKEN=

# WhatsApp Phone Number ID
# Get from: https://developers.facebook.com/apps > WhatsApp > API Setup
WHATSAPP_PHONE_NUMBER_ID=

# Allowed phone numbers (comma-separated, e.g., 886912345678)
WHATSAPP_ALLOWED_NUMBERS=

# Legacy: WhatsApp bridge port (Node.js bridge for whatsapp-web.js)
WHATSAPP_BRIDGE_PORT=3000

# Ignore group messages
WHATSAPP_IGNORE_GROUPS=false

# ========================================
# MS Teams Settings (Optional)
# ========================================

# Enable MS Teams integration
TEAMS_ENABLED=false

# Azure AD App Registration ID
# Get from: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
TEAMS_APP_ID=

# Azure AD App Password
TEAMS_APP_PASSWORD=

# Teams bot HTTP port
TEAMS_PORT=3978

# Allowed tenant IDs (comma-separated)
TEAMS_ALLOWED_TENANTS=

# Allowed Teams user IDs (comma-separated)
# Leave empty to allow all users
TEAMS_ALLOWED_USERS=

# ========================================
# Tailscale VPN Settings (Optional)
# ========================================

# Tailscale API key (for remote management)
# Get from: https://login.tailscale.com/admin/settings/keys
TAILSCALE_API_KEY=

# Tailscale tailnet name (e.g., example.com or user@gmail.com)
TAILSCALE_TAILNET=

# Use CLI instead of API (default: true)
TAILSCALE_USE_CLI=true

# Tailscale binary path
TAILSCALE_PATH=tailscale

# ========================================
# iMessage Settings (macOS only)
# ========================================

# Enable iMessage integration (macOS only)
IMESSAGE_ENABLED=false

# Poll interval in seconds
IMESSAGE_POLL_INTERVAL=2.0

# Allowed contacts (comma-separated phone numbers or emails)
IMESSAGE_ALLOWED_CONTACTS=

# ========================================
# Moonshot AI Settings (月之暗面, China)
# ========================================

# Moonshot API key
# Get from: https://platform.moonshot.cn/
MOONSHOT_API_KEY=

# Moonshot model: moonshot-v1-8k, moonshot-v1-32k, moonshot-v1-128k
MOONSHOT_MODEL=moonshot-v1-8k

# ========================================
# GLM (智譜 ChatGLM) Settings (China)
# ========================================

# GLM API key (format: {id}.{secret})
# Get from: https://open.bigmodel.cn/
GLM_API_KEY=

# GLM model: glm-4-plus, glm-4, glm-4-long, glm-4-flash, glm-4v-plus
GLM_MODEL=glm-4-flash

# ========================================
# Minimax AI Settings (China)
# ========================================

# Minimax API key
# Get from: https://api.minimax.chat/
MINIMAX_API_KEY=

# Minimax model: abab6.5s-chat, abab6.5-chat, abab5.5s-chat, abab5.5-chat
MINIMAX_MODEL=abab6.5s-chat

# Minimax Group ID (optional, for enterprise accounts)
MINIMAX_GROUP_ID=

# ========================================
# Line Bot Settings (Optional)
# ========================================

# Enable Line bot integration
LINE_ENABLED=false

# Line channel access token
# Get from: https://developers.line.biz/
LINE_CHANNEL_ACCESS_TOKEN=

# Line channel secret
LINE_CHANNEL_SECRET=

# Allowed LINE user IDs (comma-separated)
# Leave empty to allow all users
# You can find your LINE user ID in webhook logs
LINE_ALLOWED_USERS=

# ========================================
# Google API Settings (Calendar & Gmail)
# ========================================

# Google OAuth2 credentials file path
# Download from: https://console.cloud.google.com/apis/credentials
# 1. Create a new project or select existing
# 2. Enable Google Calendar API and Gmail API
# 3. Create OAuth 2.0 Client ID (Desktop app)
# 4. Download JSON and save as data/google/credentials.json
GOOGLE_CREDENTIALS_FILE=data/google/credentials.json

# Google OAuth 憑證路徑
GOOGLE_CREDENTIALS_PATH=data/google/credentials.json

# Token 儲存路徑（首次認證後自動建立）
GOOGLE_TOKEN_PATH=data/google/token.json

# Google Calendar settings
# Commands: /calendar, /calendar week, /calendar add
# Required OAuth scopes:
#   - https://www.googleapis.com/auth/calendar.readonly
#   - https://www.googleapis.com/auth/calendar.events

# Gmail settings
# Commands: /gmail, /gmail search, /gmail send
# Required OAuth scopes:
#   - https://www.googleapis.com/auth/gmail.readonly
#   - https://www.googleapis.com/auth/gmail.send
#   - https://www.googleapis.com/auth/gmail.modify

# ========================================
# Skills Registry Settings
# ========================================

# Skills registry URL (optional, for remote skill discovery)
# Leave empty to use built-in skills only
SKILLS_REGISTRY_URL=

# Skills directory (default: ./skills)
# SKILLS_DIR=./skills

# ========================================
# Signal Messenger Settings (Optional)
# ========================================

# Enable Signal integration
SIGNAL_ENABLED=false

# Signal phone number (with country code)
# Example: +1234567890
SIGNAL_PHONE_NUMBER=

# Path to signal-cli binary
# Install from: https://github.com/AsamK/signal-cli
SIGNAL_CLI_PATH=signal-cli

# signal-cli config directory
# SIGNAL_CONFIG_PATH=~/.local/share/signal-cli

# ========================================
# Google Chat Settings (Optional)
# ========================================

# Enable Google Chat integration
GOOGLE_CHAT_ENABLED=false

# Google Chat service account credentials
# Download from Google Cloud Console
GOOGLE_CHAT_CREDENTIALS=data/google/chat_service_account.json

# Google Chat webhook URL (for simple integration)
# GOOGLE_CHAT_WEBHOOK_URL=

# Allowed Google Chat user IDs (comma-separated)
# Format: users/1234567890 (from Chat API)
# Leave empty to allow all users
GOOGLE_CHAT_ALLOWED_USERS=

# ========================================
# Voice Settings (Voice Wake / Talk Mode)
# ========================================

# Voice wake word engine: vosk, porcupine
VOICE_WAKE_ENGINE=vosk

# Wake words (comma-separated)
VOICE_WAKE_WORDS=hey cursor,ok cursor

# Porcupine access key (if using porcupine)
# Get from: https://picovoice.ai/
PORCUPINE_ACCESS_KEY=

# Vosk model path (if using vosk)
# Download from: https://alphacephei.com/vosk/models
VOSK_MODEL_PATH=models/vosk-model-small-en

# Speech-to-text provider: whisper, vosk, google, azure
STT_PROVIDER=whisper

# Text-to-speech provider: elevenlabs, edge, google, azure
TTS_PROVIDER=edge

# ElevenLabs API key (if using elevenlabs)
ELEVENLABS_API_KEY=

# ========================================
# Agent to Agent Settings
# ========================================

# Enable Agent-to-Agent communication
A2A_ENABLED=true

# Session capabilities (comma-separated)
# Examples: code, research, design, test
A2A_CAPABILITIES=code,research
