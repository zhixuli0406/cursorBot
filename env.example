# ========================================
# CursorBot Environment Configuration
# ========================================

# Telegram Bot Settings (required)
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_ALLOWED_USERS=123456789,987654321

# ========================================
# Workspace Settings
# ========================================

# Local workspace path for file operations
# This path will be mounted to /workspace in Docker container
# Windows example: C:/Users/YourName/Projects
# macOS example: /Users/yourname/projects
# Linux example: /home/yourname/projects
CURSOR_WORKSPACE_PATH=/path/to/your/projects

# ========================================
# Server Settings
# ========================================

SERVER_HOST=0.0.0.0
SERVER_PORT=8000
DEBUG=false

# ========================================
# Security Settings
# ========================================

SECRET_KEY=your_secret_key_here
SESSION_TIMEOUT=3600

# ========================================
# Session Management (ClawdBot-style)
# Reference: https://docs.clawd.bot/concepts/session
# ========================================

# DM scope mode: how direct messages are grouped
# main = all DMs share main session (default, best for continuity)
# per-peer = isolate by sender id across channels
# per-channel-peer = isolate by channel + sender (for multi-user inboxes)
SESSION_DM_SCOPE=main

# Session reset mode
# daily = reset at specific hour each day (default)
# idle = reset after idle period
# manual = only reset manually (/new, /reset)
# never = never auto-reset
SESSION_RESET_MODE=daily

# Hour of day for daily reset (0-23, default 4 = 4:00 AM)
SESSION_RESET_HOUR=4

# Minutes of idle before reset (for idle mode, default 120)
SESSION_IDLE_MINUTES=120

# Data directory for session storage
CURSORBOT_DATA_DIR=data

# ========================================
# Web Authentication (Dashboard & WebChat)
# ========================================

# Enable web authentication (recommended for production)
WEB_AUTH_ENABLED=true

# Admin credentials for Dashboard and WebChat
# IMPORTANT: Change these in production!
WEB_ADMIN_USERNAME=admin
WEB_ADMIN_PASSWORD=

# Note: If WEB_ADMIN_PASSWORD is empty, authentication is disabled

# ========================================
# Database & Logging
# ========================================

DATABASE_PATH=./data/cursorbot.db
LOG_LEVEL=INFO
LOG_FILE_PATH=./logs/cursorbot.log

# ========================================
# Cursor Background Agent Settings
# ========================================

# Enable Background Agent (required for /ask command)
BACKGROUND_AGENT_ENABLED=true

# Cursor API Key (required for Background Agent)
# Get this from: https://cursor.com/dashboard?tab=background-agents
CURSOR_API_KEY=

# ========================================
# Cursor CLI Settings (Recommended)
# ========================================

# Install Cursor CLI: curl https://cursor.com/install -fsS | bash

# Cursor CLI working directory (optional)
# If not set, uses CURSOR_WORKSPACE_PATH automatically
# Only set this if you want CLI to use a different directory than workspace
CURSOR_WORKING_DIR=

# Cursor CLI model (optional, uses CLI default)
# Available models (use /climodel list to see all):
# - auto: Auto select (default)
# - gpt-5.2, gpt-5.2-codex: GPT-5.2 series
# - opus-4.5, opus-4.5-thinking: Claude 4.5 Opus
# - sonnet-4.5, sonnet-4.5-thinking: Claude 4.5 Sonnet
# - gemini-3-pro, gemini-3-flash: Gemini 3 series
# - grok: Grok
CURSOR_CLI_MODEL=

# Cursor CLI timeout in seconds (default: 300)
CURSOR_CLI_TIMEOUT=300

# Disable CLI context memory (--resume) if causing issues
# Set to 1, true, or yes to disable
CLI_DISABLE_RESUME=

# Optional: GitHub repository URL for Background Agent tasks
CURSOR_GITHUB_REPO=

# Task timeout and poll interval
BACKGROUND_AGENT_TIMEOUT=300
BACKGROUND_AGENT_POLL_INTERVAL=5

# ========================================
# LLM Provider Settings
# ========================================
# 
# Support multiple AI providers. Configure the ones you want to use.
# Priority (if DEFAULT_LLM_PROVIDER not set):
#   OpenRouter > Copilot > OpenAI > Anthropic > Google > Ollama > Custom
#

# --- Default Provider ---
# Set to force a specific provider: openai, google, anthropic, openrouter, ollama, custom
DEFAULT_LLM_PROVIDER=
# Optional: Override the default model for the chosen provider
DEFAULT_LLM_MODEL=

# --- OpenAI ---
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=
OPENAI_API_BASE=https://api.openai.com/v1
# Latest Models (2026):
#   GPT-5 Series: gpt-5.2, gpt-5-main, gpt-5-main-mini
#   Thinking Models: gpt-5-thinking, gpt-5-thinking-mini, gpt-5-thinking-nano
#   Legacy: gpt-4o, gpt-4o-mini, gpt-4-turbo, o3, o1-preview, o1-mini
OPENAI_MODEL=gpt-5-main-mini

# --- Google Gemini ---
# Get API key from: https://aistudio.google.com/apikey
GOOGLE_GENERATIVE_AI_API_KEY=
# Latest Models (2026):
#   Gemini 3: gemini-3-pro-preview, gemini-3-flash-preview, gemini-3-pro-image-preview
#   Gemini 2.5: gemini-2.5-pro, gemini-2.5-flash, gemini-2.5-flash-lite
#   Legacy: gemini-2.0-flash, gemini-1.5-pro, gemini-1.5-flash
GOOGLE_MODEL=gemini-3-flash-preview

# --- Anthropic Claude ---
# Get API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=
ANTHROPIC_API_BASE=https://api.anthropic.com/v1
# Latest Models (2026):
#   Claude 4.5: claude-opus-4-5-20251101, claude-sonnet-4-5-20250929
#   Claude 4: claude-sonnet-4-20250514
#   Legacy: claude-3-5-sonnet-20241022, claude-3-5-haiku-20241022, claude-3-opus-20240229
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# --- OpenRouter (Proxy to multiple models) ---
# Get API key from: https://openrouter.ai/keys
# Recommended for access to multiple models with one key
OPENROUTER_API_KEY=
# Free models (2026):
#   - google/gemini-3-flash-preview:free (recommended)
#   - mistral/devstral-2-2512:free (123B coding model)
#   - deepseek/deepseek-r1-0528:free (reasoning)
#   - z-ai/glm-4.5-air:free (lightweight agent)
#   - meta-llama/llama-3.3-70b-instruct:free
# Paid models:
#   - anthropic/claude-sonnet-4.5
#   - openai/gpt-5-main
#   - google/gemini-3-pro-preview
OPENROUTER_MODEL=google/gemini-3-flash-preview:free

# --- Ollama (Local Models) ---
# Install Ollama from: https://ollama.ai/
# Run: ollama pull llama3.3
OLLAMA_ENABLED=false
OLLAMA_API_BASE=http://localhost:11434
# Latest Models (2026):
#   Llama: llama3.3, llama3.2, llama3.1 (8B-405B)
#   Qwen: qwen3, qwen3-coder, qwen3-vl, qwen2.5 (0.5B-235B)
#   DeepSeek: deepseek-r1, deepseek-v3.2 (reasoning)
#   Mistral: mistral-large-3, mistral (MoE models)
#   Others: gemma3, phi-4, glm-4.7-flash
OLLAMA_MODEL=llama3.3

# --- Custom OpenAI-Compatible Endpoint ---
# For self-hosted models or alternative APIs (LM Studio, vLLM, etc.)
CUSTOM_API_KEY=
CUSTOM_API_BASE=
CUSTOM_MODEL=default

# --- GitHub Copilot / GitHub Models ---
# Use your GitHub models via GitHub Models API
# Requires GitHub Personal Access Token (classic) with these permissions:
#   - read:user (required)
#   - user:email (required)
#   - models (required) - for GitHub Models API access
# Get token from: https://github.com/settings/tokens
# Enable GitHub Models access at: https://github.com/marketplace/models
# 
# IMPORTANT: Token must have "models" permission or you'll get 401 error
GITHUB_TOKEN=
COPILOT_ENABLED=false
# Available models (GitHub Models API - 使用 publisher/model 格式):
#   GPT-5: openai/gpt-5, openai/gpt-5-mini, openai/gpt-5-nano, openai/gpt-5-chat
#   GPT-4.1: openai/gpt-4.1, openai/gpt-4.1-mini, openai/gpt-4.1-nano
#   GPT-4o: openai/gpt-4o, openai/gpt-4o-mini
#   Others: deepseek/deepseek-v3-0324, meta/llama-4-scout-17b-16e-instruct
COPILOT_MODEL=openai/gpt-5

# --- AI General Settings ---
CUSTOM_PROMPT=
AI_MAX_TOKENS=4096
AI_TEMPERATURE=0.7

# ========================================
# TTS (Text-to-Speech) Settings (Optional)
# ========================================

# --- ElevenLabs (High Quality) ---
# Get API key from: https://elevenlabs.io/
ELEVENLABS_API_KEY=

# Default TTS provider: openai, edge, elevenlabs
DEFAULT_TTS_PROVIDER=edge

# Default TTS voice
# OpenAI: alloy, echo, fable, onyx, nova, shimmer
# Edge: zh-TW-HsiaoChenNeural, en-US-JennyNeural, etc.
# ElevenLabs: rachel, domi, bella, antoni, etc.
DEFAULT_TTS_VOICE=

# ========================================
# OAuth Settings (Optional)
# ========================================

# --- GitHub OAuth ---
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_OAUTH_REDIRECT_URI=http://localhost:8000/oauth/github/callback

# --- Google OAuth ---
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:8000/oauth/google/callback

# --- Discord OAuth ---
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_OAUTH_REDIRECT_URI=http://localhost:8000/oauth/discord/callback

# ========================================
# Sandbox Settings (Optional)
# ========================================

# Default sandbox type: subprocess, docker, restricted
DEFAULT_SANDBOX_TYPE=subprocess

# Sandbox execution timeout (seconds)
SANDBOX_TIMEOUT=30

# Docker sandbox settings
SANDBOX_MEMORY_LIMIT=256m
SANDBOX_CPU_LIMIT=1.0
SANDBOX_NETWORK_ENABLED=false

# ========================================
# Queue & Heartbeat Settings (Optional)
# ========================================

# Task queue settings
QUEUE_MAX_CONCURRENT=5
QUEUE_DEFAULT_TIMEOUT=300

# Heartbeat monitoring interval (seconds)
HEARTBEAT_INTERVAL=30

# ========================================
# Discord Bot Settings (Optional)
# ========================================

# Enable Discord bot
DISCORD_ENABLED=false

# Discord bot token
# Get from: https://discord.com/developers/applications
DISCORD_BOT_TOKEN=

# Allowed Discord guild (server) IDs (comma-separated)
DISCORD_ALLOWED_GUILDS=

# Allowed Discord user IDs (comma-separated)
DISCORD_ALLOWED_USERS=

# ========================================
# Discord Voice Settings (Optional)
# ========================================

# Enable Discord voice channel listening
DISCORD_VOICE_ENABLED=false

# Transcription model: whisper, google, openai_api
DISCORD_VOICE_TRANSCRIPTION=whisper

# Whisper model size: tiny, base, small, medium, large
DISCORD_VOICE_WHISPER_MODEL=base

# Silence threshold for VAD (lower = more sensitive)
DISCORD_VOICE_SILENCE_THRESHOLD=500

# Seconds of silence to end utterance
DISCORD_VOICE_SILENCE_DURATION=1.5

# ========================================
# WhatsApp Settings (Optional)
# ========================================

# Enable WhatsApp integration
WHATSAPP_ENABLED=false

# WhatsApp bridge port (Node.js bridge)
WHATSAPP_BRIDGE_PORT=3000

# Allowed phone numbers (comma-separated, e.g., 886912345678)
WHATSAPP_ALLOWED_NUMBERS=

# Ignore group messages
WHATSAPP_IGNORE_GROUPS=false

# ========================================
# MS Teams Settings (Optional)
# ========================================

# Enable MS Teams integration
TEAMS_ENABLED=false

# Azure AD App Registration ID
# Get from: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
TEAMS_APP_ID=

# Azure AD App Password
TEAMS_APP_PASSWORD=

# Teams bot HTTP port
TEAMS_PORT=3978

# Allowed tenant IDs (comma-separated)
TEAMS_ALLOWED_TENANTS=

# ========================================
# Tailscale VPN Settings (Optional)
# ========================================

# Tailscale API key (for remote management)
# Get from: https://login.tailscale.com/admin/settings/keys
TAILSCALE_API_KEY=

# Tailscale tailnet name (e.g., example.com or user@gmail.com)
TAILSCALE_TAILNET=

# Use CLI instead of API (default: true)
TAILSCALE_USE_CLI=true

# Tailscale binary path
TAILSCALE_PATH=tailscale

# ========================================
# iMessage Settings (macOS only)
# ========================================

# Enable iMessage integration (macOS only)
IMESSAGE_ENABLED=false

# Poll interval in seconds
IMESSAGE_POLL_INTERVAL=2.0

# Allowed contacts (comma-separated phone numbers or emails)
IMESSAGE_ALLOWED_CONTACTS=

# ========================================
# Moonshot AI Settings (月之暗面, China)
# ========================================

# Moonshot API key
# Get from: https://platform.moonshot.cn/
MOONSHOT_API_KEY=

# Moonshot model: moonshot-v1-8k, moonshot-v1-32k, moonshot-v1-128k
MOONSHOT_MODEL=moonshot-v1-8k

# ========================================
# GLM (智譜 ChatGLM) Settings (China)
# ========================================

# GLM API key (format: {id}.{secret})
# Get from: https://open.bigmodel.cn/
GLM_API_KEY=

# GLM model: glm-4-plus, glm-4, glm-4-long, glm-4-flash, glm-4v-plus
GLM_MODEL=glm-4-flash

# ========================================
# Line Bot Settings (Optional)
# ========================================

# Enable Line bot integration
LINE_ENABLED=false

# Line channel access token
# Get from: https://developers.line.biz/
LINE_CHANNEL_ACCESS_TOKEN=

# Line channel secret
LINE_CHANNEL_SECRET=

# Webhook server port
LINE_WEBHOOK_PORT=8080
